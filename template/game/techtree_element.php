<style>
#techtree div.greenBorder, 
#techtree div.redBorder { z-index:3;}
#techtree div.greenBorder {	background-image:url(images/techtree/greenBorder.gif);	}
#techtree div.redBorder {	background-image:url(images/techtree/redBorder.gif);	}	


div#A1G {background-image:url(images/techtree/A1G.gif);}
div#A1R {background-image:url(images/techtree/A1R.gif);}
div#A2G {background-image:url(images/techtree/A2G.gif);}
div#A2R {background-image:url(images/techtree/A2R.gif);}
div#A3G {background-image:url(images/techtree/A3G.gif);}
div#A3R {background-image:url(images/techtree/A3R.gif);}
div#A4G {background-image:url(images/techtree/A4G.gif);}
div#A4R {background-image:url(images/techtree/A4R.gif);}
div#A5G {background-image:url(images/techtree/A5G.gif);}
div#A5R {background-image:url(images/techtree/A5R.gif);}
div#A6G {background-image:url(images/techtree/A6G.gif);}
div#A6R {background-image:url(images/techtree/A6R.gif);}
div#A7G {background-image:url(images/techtree/A7G.gif);}
div#A7R {background-image:url(images/techtree/A7R.gif);}
div#A8G {background-image:url(images/techtree/A8G.gif);}
div#A8R {background-image:url(images/techtree/A8R.gif);}
div#A9G {background-image:url(images/techtree/A9G.gif);}
div#A9R {background-image:url(images/techtree/A9R.gif);}
div#A10G {background-image:url(images/techtree/A10G.gif);}
div#A10R {background-image:url(images/techtree/A10R.gif);}
div#A11G {background-image:url(images/techtree/A11G.gif);}
div#A11R {background-image:url(images/techtree/A11R.gif);}
div#A12G {background-image:url(images/techtree/A12G.gif);}
div#A12R {background-image:url(images/techtree/A12R.gif);}
div#A13G {background-image:url(images/techtree/A13G.gif);}
div#A13R {background-image:url(images/techtree/A13R.gif);}
div#A14G {background-image:url(images/techtree/A14G.gif);}
div#A14R {background-image:url(images/techtree/A14R.gif);}
div#A15G {background-image:url(images/techtree/A15G.gif);}
div#A15R {background-image:url(images/techtree/A15R.gif);}
div#A16G {background-image:url(images/techtree/A16G.gif);}
div#A16R {background-image:url(images/techtree/A16R.gif);}
div#A17G {background-image:url(images/techtree/A17G.gif);}
div#A17R {background-image:url(images/techtree/A17R.gif);}
div#A18G {background-image:url(images/techtree/A18G.gif);}
div#A18R {background-image:url(images/techtree/A18R.gif);}
div#A19G {background-image:url(images/techtree/A19G.gif);}
div#A19R {background-image:url(images/techtree/A19R.gif);}
div#A20G {background-image:url(images/techtree/A20G.gif);}
div#A20R {background-image:url(images/techtree/A20R.gif);}
div#L1G {background-image:url(images/techtree/L1G.gif);}
div#L1R {background-image:url(/images/techtree/L1R.gif);}
div#L2G {background-image:url(images/techtree/L2G.gif);}
div#L2R {background-image:url(images/techtree/L2R.gif);}
div#L3G {background-image:url(images/techtree/L3G.gif);}
div#L3R {background-image:url(images/techtree/L3R.gif);}
div#L4G {background-image:url(images/techtree/L4G.gif);}
div#L4R {background-image:url(images/techtree/L4R.gif);}
div#L5G {background-image:url(images/techtree/L5G.gif);}
div#L5R {background-image:url(images/techtree/L5R.gif);}
div#L6G {background-image:url(images/techtree/L6G.gif);}
div#L6R {background-image:url(images/techtree/L6R.gif);}
div#L7G {background-image:url(images/techtree/L7G.gif);}
div#L7R {background-image:url(images/techtree/L7R.gif);}
div#L8G {background-image:url(images/techtree/L8G.gif);}
div#L8R {background-image:url(images/techtree/L8R.gif);}
div#L9G {background-image:url(images/techtree/L9G.gif);}
div#L9R {background-image:url(images/techtree/L9R.gif);}
div#L10G {background-image:url(images/techtree/L10G.gif);}
div#L10R {background-image:url(images/techtree/L10R.gif);}
div#L11G {background-image:url(images/techtree/L11G.gif);}
div#L11R {background-image:url(images/techtree/L11R.gif);}
div#L12G {background-image:url(images/techtree/L12G.gif);}
div#L12R {background-image:url(images/techtree/L12R.gif);}
div#L13G {background-image:url(images/techtree/L13G.gif);}
div#L13R {background-image:url(images/techtree/L13R.gif);}
div#L14G {background-image:url(images/techtree/L14G.gif);}
div#L14R {background-image:url(images/techtree/L14R.gif);}
div#L15G {background-image:url(images/techtree/L15G.gif);}
div#L15R {background-image:url(images/techtree/L15R.gif);}
div#L16G {background-image:url(images/techtree/L16G.gif);}
div#L16R {background-image:url(images/techtree/L16R.gif);}
div#L17G {background-image:url(images/techtree/L17G.gif);}
div#L17R {background-image:url(images/techtree/L17R.gif);}
div#L18G {background-image:url(images/techtree/L18G.gif);}
div#L18R {background-image:url(images/techtree/L18R.gif);}

#wrapper {
	position:relative;
	margin:0px 0px 0px 15px;
	padding-bottom:10px;
	overflow:visible;
}

#wrapper div {
	height:80px;
	width:80px;
	position:absolute;
	background-repeat:no-repeat;
}

#wrapper span {
	display:block;
	font-weight:bold;
	position:absolute;
}

div.greenBorder,
div.redBorder { z-index:3;}
div.greenBorder {	background-image:url(images/techtree/greenBorder.gif);	}
div.redBorder {	background-image:url(images/techtree/redBorder.gif);	}

.undermark {	color:#9c0;}

.overmark { color:#D43635;}

.normalmarky { color:#848484;}

span.NW {

	top:5px;
	left:5px;
}

span.NE {
	top:5px;
	left:45px;
}

span.SE {

	top:45px;
	left:45px;
}

span.SW {

	top:45px;
	left:5px;
}

span.N {

	top:5px;
	left:34px;
}

span.E {
	top:34px;
	left:45px;
}

span.S {
	top:45px;
	left:34px;
}

span.W {
	top:34px;
	left:5px;
}

</style>

<div id="wrapper" align="center">

<?

$cols = $parse['cols'];
$rows = count($parse['tree']);

for ($i = 0; $i <= $rows; $i++) {
	for ($j = 0; $j <= $cols; $j++) {
		echo '<div style="top:'.(20 + $i * 80).'px; left:'.(10 + 80 * $j).'px;">';

		if (isset($parse['tree'][$i][$j])) {

			if (isset($parse['tree'][$i][$j]['arrow'])) {
				$arrow = explode(';', $parse['tree'][$i][$j]['arrow']);

				foreach ($arrow AS $txt) {
					if ($txt == '') continue;
					echo '<div id="'.$txt.'"></div>';
				}

				if (isset($parse['tree'][$i][$j]['level'])) {
					echo'<span class="'.$parse['tree'][$i][$j]['level'][0].' '.(($parse['tree'][$i][$j]['level'][0] == 'G') ? 'undermark' : 'overmark').'">'.$parse['tree'][$i][$j]['level'][1].'</span>';
				}
			} elseif (isset($parse['tree'][$i][$j]['element'])) {
				echo '<a href="?set=infos&gid='.$parse['tree'][$i][$j]['element'][0].'"><div><img src="'.$dpath.'gebaeude/'.$parse['tree'][$i][$j]['element'][0].'.gif" width="80" height="80"></div></a>';

				echo '<a href="?set=infos&gid='.$parse['tree'][$i][$j]['element'][0].'">';

				if ($parse['tree'][$i][$j]['element'][1] == 'G')
					echo '<div class="greenBorder"></div>';
				else
					echo '<div class="redBorder"></div>';

				echo '</a>';
			}

		}
		echo'</div>';
	}
}


?>

</div>