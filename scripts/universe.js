function galaxy_submit(a){document.getElementById("auto").name=a;document.getElementById("galaxy_form").submit()}function fenster(b,a){var c=window.open(b,a,"resizable=yes,scrollbars=yes,menubar=no,toolbar=no,width=640,height=480,top=0,left=0");c.focus()}function PrintRow(){var b="";b+="<table width=710><tr>";b+="<td class=c colspan=6>Солнечная система "+galaxy+":"+system+"</td><td class=c colspan=2>Дейтерий: "+Deuterium+"</td>";b+="</tr><tr>";b+="<td class=c>№</td>";b+="<td class=c>&nbsp;</td>";b+="<td class=c>Планета</td>";b+="<td class=c>Луна</td>";b+="<td class=c>Обломки</td>";b+="<td class=c>Игрок</td>";b+="<td class=c>Альянс</td>";b+="<td class=c>Действия</td>";b+="</tr>";var a=0;for(planet=1;planet<=15;planet++){b+="<tr>";b+="<th width=30>"+planet+"</th>";b+="<th width=30>";if(row[planet]&&row[planet]["destruyed"]==0){a++;b+='<a style="cursor: pointer;" onmouseover=\'return overlib("';b+="<table width=240>";b+="<tr><td class=c colspan=2>Планета "+row[planet]["name"]+" ["+galaxy+":"+system+":"+planet+"]</td></tr>";b+="<tr>";b+="<th width=80><img src="+dpath+"planeten/small/s_"+row[planet]["image"]+".jpg height=75 width=75></th>";b+="<th align=left>";if(user.phalanx==1){b+="<a href=# onclick=fenster(&#039;?set=phalanx&amp;galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&#039;) >Фаланга</a><br />"}if(row[planet]["user_id"]!=user.id){b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&amp;planettype="+row[planet]["planet_type"]+"&amp;target_mission=1>Атаковать</a><br />";b+="<a href=?set=fleet&galaxy="+galaxy+"&system="+system+"&planet="+planet+"&planettype="+row[planet]["planet_type"]+"&target_mission=5>Удерживать</a><br />"}else{b+="<a href=?set=fleet&galaxy="+galaxy+"&system="+system+"&planet="+planet+"&planettype="+row[planet]["planet_type"]+"&target_mission=4>Оставить</a><br />"}b+="<a href=?set=fleet&galaxy="+galaxy+"&system="+system+"&planet="+planet+"&planettype="+row[planet]["planet_type"]+"&target_mission=3>Транспорт</a>";b+="</th></tr>";b+="</table>\", STICKY, MOUSEOFF, DELAY, 750, CENTER, OFFSETX, -40, OFFSETY, -40 );' onmouseout='return nd();'>";b+="<img src="+dpath+"planeten/small/s_"+row[planet]["image"]+".jpg height=30 width=30></a>"}else{b+="&nbsp;"}b+="</th>";b+='<th style="white-space: nowrap;" width=130>';if(row[planet]&&row[planet]["destruyed"]==0){if(row[planet]["ally_id"]==user.ally_id&&row[planet]["user_id"]!=user.id&&row[planet]["ally_id"]!=0){TextColor='<font color="green">';EndColor="</font>"}else{if(row[planet]["user_id"]==user.id){TextColor='<font color="red">';EndColor="</font>"}else{TextColor="";EndColor=""}}b+=TextColor;b+=row[planet]["name"];b+=EndColor;if(row[planet]["last_update"]<60&&row[planet]["user_id"]!=user.id){if(row[planet]["last_update"]<=10&&row[planet]["user_id"]!=user.id){b+="(*)"}else{b+=" ("+Math.floor(row[planet]["last_update"])+")"}}}else{if(row[planet]&&row[planet]["destruyed"]!=0){b+="Планета уничтожена"}else{b+="&nbsp;"}}b+="</th>";b+='<th style="white-space: nowrap;" width=30>';if(row[planet]&&row[planet]["luna_destruyed"]==0&&row[planet]["luna_id"]){b+='<a style="cursor: pointer;" onmouseover=\'return overlib("';b+="<table width=240>";b+="<tr>";b+="<td class=c colspan=2>";b+="Луна: "+row[planet]["luna_name"]+" ["+galaxy+":"+system+":"+planet+"]";b+="</td>";b+="</tr><tr>";b+="<th width=80>";b+="<img src="+dpath+"planeten/mond.jpg height=75 width=75 />";b+="</th>";b+="<th>";b+="<table>";b+="<tr>";b+="<td class=c colspan=2>Характеристики</td>";b+="</tr><tr>";b+="<th>Диаметр</th>";b+="<th>"+format(row[planet]["luna_diameter"])+"</th>";b+="</tr><tr>";b+="<th>Температура</th><th>"+row[planet]["luna_temp"]+"</th>";b+="</tr><tr>";b+="<td class=c colspan=2>Действия</td>";b+="</tr><tr>";b+="<th colspan=2 align=center>";if(row[planet]["user_id"]!=user.id){b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&amp;planettype=3&amp;target_mission=1>Атаковать</a><br />";b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&planettype=3&target_mission=5>Удерживать</a><br />";if(user.destroy>0){b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&planettype=3&target_mission=9>Уничтожить</a><br>"}}else{b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&planettype=3&target_mission=4>Оставить</a><br />"}b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&planettype=3&target_mission=3>Транспорт</a><br />";b+="</tr>";b+="</table>";b+="</th>";b+="</tr>";b+='</table>"';b+=", STICKY, MOUSEOFF, DELAY, 750, CENTER, OFFSETX, -40, OFFSETY, -40 );' onmouseout='return nd();'>";b+="<img src="+dpath+"planeten/small/s_mond.jpg height=22 width=22></a>"}else{if(row[planet]&&row[planet]["luna_destruyed"]>0&&row[planet]["luna_id"]){b+="~"}else{b+="&nbsp;"}}b+="</th>";if(row[planet]&&(row[planet]["metal"]!=0||row[planet]["crystal"]!=0)){b+='<th style="';if((row[planet]["metal"]+row[planet]["crystal"])>=10000000){b+="background-color: rgb(100, 0, 0);"}else{if((row[planet]["metal"]+row[planet]["crystal"])>=1000000){b+="background-color: rgb(100, 100, 0);"}else{if((row[planet]["metal"]+row[planet]["crystal"])>=100000){b+="background-color: rgb(0, 100, 0);"}}}b+='background-image: none;" width=30>';b+='<a style="cursor: pointer;"';b+=" onmouseover='return overlib(\"";b+="<table width=240>";b+="<tr>";b+="<td class=c colspan=2>";b+="Обломки: ["+galaxy+":"+system+":"+planet+"]";b+="</td>";b+="</tr><tr>";b+="<th width=80>";b+="<img src="+dpath+"planeten/debris.jpg height=75 width=75 />";b+="</th>";b+="<th>";b+="<table width=95%>";b+="<tr>";b+="<td class=c colspan=2>Ресурсы</td>";b+="</tr><tr>";b+="<th>Металл</th><th>"+row[planet]["metal"]+"</th>";b+="</tr><tr>";b+="<th>Кристалл</th><th>"+row[planet]["crystal"]+"</th>";b+="</tr><tr>";b+="<th colspan=2 align=left><a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&amp;planettype=2&amp;target_mission=8>Переработать</a></th>";b+="</tr></table>";b+="</th>";b+="</tr>";b+='</table>"';b+=", STICKY, MOUSEOFF, DELAY, 750, CENTER, OFFSETX, -40, OFFSETY, -40 );' onmouseout='return nd();'>";b+="<img src="+dpath+"planeten/debris.jpg height=22 width=22></a>"}else{b+='<th style="white-space: nowrap;" width=30>&nbsp;'}b+="</th>";b+="<th width=150>";if(row[planet]&&row[planet]["user_id"]&&row[planet]["destruyed"]==0){CurrentPoints=user.total_points;RowUserPoints=row[planet]["total_points"];if(!RowUserPoints){RowUserPoints=0}if(!row[planet]["total_rank"]){row[planet]["total_rank"]=0}CurrentLevel=CurrentPoints*5;RowUserLevel=RowUserPoints*5;if(row[planet]["banaday"]>time&&row[planet]["urlaubs_modus_time"]>0){Systemtatus2='U <a href="?set=banned"><span class="banned">G</span></a>';Systemtatus='<span class="vacation">'}else{if(row[planet]["banaday"]>time){Systemtatus2='<a href="?set=banned"><span class="banned">G</span></a>';Systemtatus=""}else{if(row[planet]["urlaubs_modus_time"]>0){Systemtatus2='<span class="vacation">U</span>';Systemtatus='<span class="vacation">'}else{if(row[planet]["onlinetime"]==1){Systemtatus2='<span class="inactive">i</span>';Systemtatus='<span class="inactive">'}else{if(row[planet]["onlinetime"]==2){Systemtatus2='<span class="longinactive">iI</span>';Systemtatus='<span class="longinactive">'}else{if(RowUserLevel<CurrentPoints&&RowUserPoints<50000){Systemtatus2='<span class="noob">N</span>';Systemtatus='<span class="noob">'}else{if(RowUserPoints>CurrentLevel&&CurrentPoints<50000){Systemtatus2="S";Systemtatus='<span class="strong">'}else{Systemtatus2="";Systemtatus=""}}}}}}}Systemtatus4=row[planet]["total_rank"];if(Systemtatus2!=""){Systemtatus6='<font color="white">(</font>';Systemtatus66='<font color="white">)</font>'}if(Systemtatus2==""){Systemtatus6="";Systemtatus66=""}admin="";if(row[planet]["authlevel"]==3){admin=' <font color="red">A</font>'}sgo="";if(row[planet]["authlevel"]==2){sgo=' <font color="orange">SGo</font>'}go="";if(row[planet]["authlevel"]==1){go=' <font color="green">Go</font>'}Systemtatus3=row[planet]["username"];Systemtart=row[planet]["total_rank"];if(Systemtart<100){Systemtart=1}else{Systemtart=(Math.floor(row[planet]["total_rank"]/100)*100)+1}b+='<a style="cursor: pointer;" onmouseover=\'return overlib("';b+="<table width=210>";b+="<tr>";b+="<td class=c colspan=2>Игрок "+row[planet]["username"]+", место "+Systemtatus4+"</td>";b+="</tr><tr>";b+="<td width=60 height=64 rowspan=3 class=c";if(row[planet]["avatar"]!=0){b+=" style=background-image:url(/images/avatars/"+row[planet]["avatar"]+".jpg);>&nbsp;</td>"}else{b+=">нет<br>аватара</td>"}if(row[planet]["user_id"]!=user.id){b+="<th><a href=?set=messages&mode=write&id="+row[planet]["user_id"]+">Послать сообщение</a></th>";b+="</tr><tr>";b+="<th><a href=?set=buddy&a=2&u="+row[planet]["user_id"]+">Добавить в друзья</a></th>";b+="</tr><tr>"}b+="<th valign=top><a href=?set=stat&who=1&range="+Systemtart+"&pid="+row[planet]["user_id"]+">Статистика</a></th>";b+="</tr>";b+="</table>\", STICKY, MOUSEOFF, DELAY, 750, CENTER, OFFSETX, -40, OFFSETY, -40 );' onmouseout='return nd();'>";b+=Systemtatus+Systemtatus3+Systemtatus6+Systemtatus+Systemtatus2+Systemtatus66+admin+sgo+go;b+="</span></a>"}else{b+="&nbsp;"}b+="</th>";b+="<th width=80>";if(row[planet]&&row[planet]["ally_id"]!=0){if(row[planet]["ally_name"]){b+='<a style="cursor: pointer;" onmouseover=\'return overlib("';b+="<table width=240>";b+="<tr>";b+="<td class=c>Альянс "+row[planet]["ally_name"]+" с "+row[planet]["ally_members"]+" членами</td>";b+="</tr>";b+="<th><table><tr>";b+="<td><a href=?set=alliance&mode=ainfo&a="+row[planet]["ally_id"]+">Информация</a></td>";b+="</tr><tr>";b+="<td><a href=?set=stat&start=0&who=2>Статистика</a></td>";if(row[planet]["ally_web"]!=""){b+="</tr><tr><td><a href="+row[planet]["ally_web"]+" target=_new>Сайт альянса</td>"}b+="</tr></table></th>";b+="</table>\", STICKY, MOUSEOFF, DELAY, 750, CENTER, OFFSETX, -40, OFFSETY, -40 );' onmouseout='return nd();'>";if(user.ally_id==row[planet]["ally_id"]){b+='<span class="allymember">'+row[planet]["ally_tag"]+"</span></a>"}else{b+=row[planet]["ally_tag"]+"</a>"}if(row[planet]["ally_id"]!=user.ally_id){if(row[planet]["type"]==0){b+="<br><small>[нейтральное]</small>"}else{if(row[planet]["type"]==1){b+='<br><small><font color="orange">[перемирие]</font></small>'}else{if(row[planet]["type"]==2){b+='<br><small><font color="green">[мир]</font></small>'}else{if(row[planet]["type"]==3){b+='<br><small><font color="red">[война]</font></small>'}}}}}}}else{b+="&nbsp;"}b+="</th>";b+='<th style="white-space: nowrap;" width=125>';if(row[planet]&&row[planet]["user_id"]!=user.id){if(row[planet]["user_id"]&&row[planet]["destruyed"]==0){b+="<a href=?set=messages&mode=write&id="+row[planet]["user_id"]+">";b+="<img src="+dpath+'img/m.gif alt="Отправить сообщение" title="Отправить сообщение" border=0></a>&nbsp;';b+="<a href=?set=buddy&a=2&amp;u="+row[planet]["user_id"]+" >";b+="<img src="+dpath+'img/b.gif alt="Добавить в друзья" title="Добавить в друзья" border=0></a>&nbsp;';if(user.missile==1){b+="<a href=?set=galaxy&mode=2&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&current="+user.current_planet+" >";b+="<img src="+dpath+'img/r.gif alt="Ракетная атака" title="Ракетная атака" border=0></a>&nbsp;'}b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&amp;planettype="+row[planet]["planet_type"]+"&amp;target_mission=6><img src="+dpath+'img/e.gif alt="Шпионаж" title="Шпионаж" border=0></a>&nbsp;';b+="<a href=?set=players&id="+row[planet]["user_id"]+">";b+="<img src="+dpath+'img/s.gif alt="Информация об игроке" title="Информация об игроке" border=0></a>&nbsp;';b+="<a href=?set=fleetshortcut&mode=add&g="+galaxy+"&s="+system+"&i="+planet+"&t="+row[planet]["planet_type"]+">";b+="<img src="+dpath+'img/z.gif alt="Добавить в закладки" title="Добавить в закладки" border=0></a>'}}else{if(!row[planet]&&user.colonizer>0){b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet="+planet+"&amp;target_mission=7><img src="+dpath+'img/e.gif alt="Колонизация" title="Колонизация" border=0></a>&nbsp;'}else{b+="&nbsp;"}}b+="</th>";b+="</tr>"}b+='<tr><th width="30">16</th>';b+="<th colspan=7>";b+="<a href=?set=fleet&galaxy="+galaxy+"&amp;system="+system+"&amp;planet=16&amp;target_mission=15>Неизведанные дали</a>";b+="</th>";b+="</tr><tr>";if(a==1){PlanetCountMessage=a+" заселённая планета"}else{if(a==0){PlanetCountMessage="нет заселённых планет"}else{PlanetCountMessage=a+" заселённые планеты"}}b+="<tr>";b+="<td class=c colspan=6>( "+PlanetCountMessage+" )</td>";b+="<td class=c colspan=2>";b+='<a href="#" style="cursor: pointer;"';b+=" onmouseover='return overlib(\"";b+="<table width=240>";b+="<tr>";b+="<td class=c colspan=2>Легенда</td>";b+="</tr><tr>";b+="<td width=220>Сильный игрок</td><td><span class=strong>S</span></td>";b+="</tr><tr>";b+="<td>Слабый игрок</td><td><span class=noob>N</span></td>";b+="</tr><tr>";b+="<td>Режим отпуска</td><td><span class=vacation>U</span></td>";b+="</tr><tr>";b+="<td>Заблокирован</td><td><span class=banned>G</span></td>";b+="</tr><tr>";b+="<td>Неактивен 7 дней</td><td><span class=inactive>i</span></td>";b+="</tr><tr>";b+="<td>Неактивен 28 дней</td><td><span class=longinactive>iI</span></td>";b+="</tr><tr>";b+="<td><font color=red>Администратор</font></td><td><font color=red>A</font></td>";b+="</tr><tr>";b+="<td><font color=green>Оператор</font></td><td><font color=green>GO</font></td>";b+="</tr><tr>";b+="<td><font color=orange>Супер оператор</font></td><td><font color=orange>SGO</font></td>";b+="</tr>";b+="</table>";b+="\", ABOVE, WIDTH, 150, STICKY, MOUSEOFF, DELAY, 50, CENTER);' onmouseout='return nd();'>";b+="Легенда</a>";b+="</td>";b+="</tr>\n<tr>";b+='<td class=c colspan=3><span id="missiles">'+user.interplanetary_misil+"</span> межпланетных ракет</td>";b+='<td class=c colspan=3><span id="slots">'+user.fleets+"</span>/"+user.max_fleets+" флотов</td>";b+="<td class=c colspan=2>";b+='<span id="recyclers">'+format(user.recycler)+"</span> переработчиков<br>";b+='<span id="probes">'+format(user.spy_sonde)+"</span> шпионских зондов</td>";b+="</tr></table>";return b}function PrintSelector(){var a="";a+='<form action="?set=galaxy&mode=1" method="post" id="galaxy_form">';a+='<input type="hidden" id="auto" value="dr" >';a+='<table border="0" style="border-spacing:0">';a+="<tr><td>";a+='<table style="border-spacing:0"><tr>';a+='<td class="c" colspan="3">Галактика</td></tr><tr>';a+='<td class="l"><input name="galaxyLeft" value="&lt;-" onclick="galaxy_submit(\'galaxyLeft\')" type="button"></td>';a+='<td class="l"><input name="galaxy" value="'+galaxy+'" size="5" maxlength="3" tabindex="1" type="text"></td>';a+='<td class="l"><input name="galaxyRight" value="-&gt;" onclick="galaxy_submit(\'galaxyRight\')" type="button"></td>';a+="</tr></table>";a+="</td>";a+='<th align="center" style="vertical-align:middle"> <input value="Просмотр" type="submit"></th>';a+="<td>";a+='<table style="border-spacing:0"><tr>';a+='<td class="c" colspan="3">Солнечная система</td></tr><tr>';a+='<td class="l"><input name="systemLeft" value="&lt;-" onclick="galaxy_submit(\'systemLeft\')" type="button"></td>';a+='<td class="l"><input name="system" value="'+system+'" size="5" maxlength="3" tabindex="2" type="text"></td>';a+='<td class="l"><input name="systemRight" value="-&gt;" onclick="galaxy_submit(\'systemRight\')" type="button"></td>';a+="</tr></table>";a+="</td>";a+="</tr>";a+="</table>";a+="</form>";return a};